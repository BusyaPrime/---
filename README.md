# PDE-LAB: High-Performance 2D Diffusion Solver 

–î–ò–°–ö–õ–ï–ô–ú–ï–†: –ü—Ä–æ–µ–∫—Ç –Ω–∞—É—á–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–¥ –ö–ª–∞—Å—Ç–µ—Ä, –ù–ò–£ –ò–¢–ú–û

–ñ–µ—Å—Ç–∫–∏–π, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–µ—Ä–æ-–∞–ª–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–π (zero-allocation –≤ –≥–æ—Ä—è—á–∏—Ö —Ü–∏–∫–ª–∞—Ö), –∫—ç—à-—Ñ—Ä–µ–Ω–¥–ª–∏ (cache-friendly) —Å–æ–ª–≤–µ—Ä –¥–ª—è 2D —É—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–µ–ø–ª–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏ –∏ –¥–∏—Ñ—Ñ—É–∑–∏–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π —á–∏—Å—Ç–æ –Ω–∞ Java 21. –ü—Ä–æ–µ–∫—Ç –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ —Å—É—Ä–æ–≤—ã–µ HPC (High-Performance Computing) –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ "–≥–æ–ª–æ–º –∂–µ–ª–µ–∑–µ" JVM, –≤—ã–∂–∏–º–∞—è –º–∞–∫—Å–∏–º—É–º –∏–∑ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–∞–º—è—Ç–∏ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö `double[]` –º–∞—Å—Å–∏–≤–æ–≤. –ù–∏–∫–∞–∫–∏—Ö –∫—Ä–∞—Å–∏–≤—ã—Ö –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç–æ–≤ –≤ hot-–ø–∞—Å–∞—Ö, —Ç–æ–ª—å–∫–æ —Ö–∞—Ä–¥–∫–æ—Ä, –º–∞—Ç–∞–Ω –∏ –≥–æ–ª—ã–µ –±–∞–π—Ç—ã. 

##  –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ú–∞—Ç–∞–Ω)
–°–æ–ª–≤–µ—Ä —Ä–µ—à–∞–µ—Ç 2D PDE —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ñ—Ñ—É–∑–∏–µ–π –∏ –∫–æ–Ω–≤–µ–∫—Ü–∏–µ–π:
$\frac{\partial u}{\partial t} = \nabla \cdot (\kappa \nabla u) - b \cdot \nabla u + f(x, y, t)$

- **–ê–ª–≥–æ—Ä–∏—Ç–º—ã**: –ù–µ—è–≤–Ω—ã–µ —Å—Ö–µ–º—ã (Crank-Nicolson / Backward Euler), 5-—Ç–æ—á–µ—á–Ω—ã–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–µ–Ω—Å–∏–ª —Å —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ $\kappa$ –ø–æ –ø–æ–ª—É-—É–∑–ª–∞–º, IMEX-—è–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π (Upwind) –∫–æ–Ω–≤–µ–∫—Ü–∏–∏. –ü–ª—é—Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —à–∞–≥ –≤—Ä–µ–º–µ–Ω–∏ (Adaptive $dt$ via Step-Doubling), —á—Ç–æ–±—ã –Ω–µ —Å—á–∏—Ç–∞—Ç—å –ª–∏—à–Ω–µ–µ –∏ –Ω–µ –∂–µ—á—å CPU –≤–ø—É—Å—Ç—É—é.
- **–ò—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–∞—Ç–µ–ª–∏**: PCG (Preconditioned Conjugate Gradient) –ø—Ä–æ–∫–∞—á–∞–Ω–Ω—ã–π –ø—Ä–µ–∫–æ–Ω–¥–µ—è–º–∏ **Jacobi** –∏ **SSOR**. –ò—Ç–µ—Ä–∞—Ü–∏–∏ –ª–µ—Ç—è—Ç –∫–∞–∫ –ø—É–ª–∏, —Å–æ–∫–æ–ª–∏–Ω—ã–π –≥–ª–∞–∑ –ø–æ–∑–∞–≤–∏–¥—É–µ—Ç (—Å–æ–π–¥—É—Ç –∑–∞ O(N)).
- **Data-Oriented Design (DOD)**: –í—ã–∫–∏–Ω—É–ª–∏ –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –Ω–∞ –ø–æ–º–æ–π–∫—É, –∏–±–æ –ø–æ–∏–Ω—Ç–µ—Ä-—á–µ–π–∑–∏–Ω–≥ ‚Äî –∑–ª–æ. –í—Å–µ —è–¥—Ä–∞ –∂—Ä—É—Ç –ø–ª–æ—Å–∫–∏–µ 1D –º–∞—Å—Å–∏–≤—ã. –°–æ–ª–≤–µ—Ä –æ–±—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–≥–æ **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –£–∑–ª—ã (Interior Nodes)**, –≤—ã–Ω–æ—Å—è –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –º–∞—Ç—Ä–∏—á–Ω—ã—Ö –≤—ã–¥–µ–ª–µ–Ω–∏–π. –ù–∏–∫–∞–∫–∏—Ö –ø–µ—Ä–µ–∞–ª–ª–æ–∫–∞—Ü–∏–π –≤ hot-loop'–µ, –Ω–∞—à GC (Garbage Collector) –ø—Ä–æ—Å—Ç–æ –∫—É—Ä–∏—Ç –≤ —Å—Ç–æ—Ä–æ–Ω–∫–µ.
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã Boundary Operators (–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è)**: –†–æ–¥–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –î–∏—Ä–∏—Ö–ª–µ, –ù–µ–π–º–∞–Ω–∞ ($\partial u / \partial n$) –∏ –†–æ–±–∏–Ω–∞. –†–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ ghost-—É–∑–ª—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–º–º–µ—Ç—Ä–∏–∏.
- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª–∫–∞—Ö**: –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–≤–∏–∂–æ–∫ –Ω–∞ `CyclicBarrier` –∏ –ø—É–ª–µ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤. –ê–≤—Ç–æ-—á–∞–Ω–∫–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –ª–æ–∞–¥ (load balancing) –ø–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º —è–¥—Ä–∞–º –∏ –º–Ω–æ–∂–∏—Ç –Ω–∞ –Ω–æ–ª—å —Ñ–æ–ª—Å-—à–∞—Ä–∏–Ω–≥ (false sharing). –ù–∏–∫–∞–∫–∏—Ö –º–æ–¥–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤, —Ç–æ–ª—å–∫–æ —Å—É—Ä–æ–≤—ã–µ –ª–æ–∫–∏ –∏ –±–∞—Ä—å–µ—Ä—ã.

##  –í—ã–∫–∞—Ç–∫–∞ –∏ –ó–∞–ø—É—Å–∫ (CLI)

–ó–∞–ø–∏–ª–∏–ª–∏ —É–¥–æ–±–Ω—ã–π `PicoCLI` —Ä–æ—É—Ç–µ—Ä –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –ø—Ä–æ–≥–æ–Ω–æ–≤. –ó–∞–±—ã–≤–∞–µ–º –ø—Ä–æ —Ö–∞—Ä–¥–∫–æ–¥, –≤—Å—ë —Ä—É–ª–∏—Ç—Å—è —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ JSON-–¥–æ–∫—É–º–µ–Ω—Ç—ã:

**–°–±–æ—Ä–∫–∞ –∂–∏—Ä–Ω–æ–≥–æ –¥–∂–∞—Ä–Ω–∏–∫–∞ (Shadow / Fat JAR):**
```powershell
.\gradlew.bat clean shadowJar verificationTest
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –ø—Ä–æ–¥–µ:**
```powershell
# –ó–∞–ø—É—Å–∫ —Å–æ–ª–≤–µ—Ä–∞ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º —à–∞–≥–æ–º –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º JFR (—à–æ–± –≤–∏–¥–µ—Ç—å, –≥–¥–µ –ø–∞–º—è—Ç—å —Ç–µ—á–µ—Ç)
java -jar build\libs\pdelab-all.jar run --config configs\profile_config.json --adaptive --adaptiveTol 1e-4 --profile jfr

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown-—Ä–µ–ø–æ—Ä—Ç–∞ –æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Ö–µ–º (–ø—Ä—É—Ñ–∞–µ–º –º–∞—Ç–∞–Ω –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π)
java -jar build\libs\pdelab-all.jar verify

# –ü—Ä–æ–∂–∞—Ä–∫–∞ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ (JMH —Ç–µ—Å—Ç—ã SpMV –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä—è–º–æ –Ω–∞ –ø—Ä–æ–¥–µ)
java -jar build\libs\pdelab-all.jar bench
```

##  –ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∏ (The "Senior++" Hardened Stuff)

- **Pure Interior Mathematics**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ $A$ (SPD condition). –í—Å–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–¥–≤–∏–≥–∏ —É–ª–µ—Ç–∞—é—Ç —Å—Ç—Ä–æ–≥–æ –≤ RHS-–≤–µ–∫—Ç–æ—Ä. –ú–∞—Ç—Ä–∏—Ü—ã —Ö—É–¥–µ—é—Ç, —Å—á–∏—Ç–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, PCG –Ω–µ –æ—Ç–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏–∏.
- **Fail-Fast Validation & Safe Configs**: `Config.java` –ª–æ–≤–∏—Ç –∫—Ä–∏–≤—ã–µ —Å–µ—Ç–∫–∏ ($N \le 0$) –∏ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç `IllegalArgumentException`. –ù–∏–∫–∞–∫–∏—Ö —Å–∞–π–ª–µ–Ω—Ç-—Ñ–µ–π–ª–æ–≤ ‚Äî –ø–∞–¥–∞–µ–º —Å—Ä–∞–∑—É –∏ —Å –≥—Ä–æ—Ö–æ—Ç–æ–º (fail-fast –ø–æ–¥—Ö–æ–¥, –¥–µ—Ç–∫–∞).
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º-—Å—Ç–µ–ø–ø–∏–Ω–≥ (Adaptive DT)**: –°–æ–ª–≤–µ—Ä —Å–∞–º —Ä–µ–∂–µ—Ç —à–∞–≥ $dt$, –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–æ–±–∏–≤–∞–µ—Ç `--adaptiveTol` (—ç–∫—Å—Ç—Ä–æ–ø–æ–ª—è—Ü–∏—è –†–∏—á–∞—Ä–¥—Å–æ–Ω–∞ –≤ –¥–µ–ª–µ).
- **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `System.out.println` –≤—ã–ø–∏–ª–µ–Ω –ø–æ–¥ –∫–æ—Ä–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å —Ä—É–∫–∞–º–∏ –¥–∂—É–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –Ω–∞–ø–∏—Å–∞–ª. –í–µ–∑–¥–µ **SLF4J + Logback**. –ü–∏—à–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Å —Ç—Ä–µ–π—Å–∞–º–∏ –≤ `logs/`, –≤—Å—ë –ø–æ –∫–∞–Ω–æ–Ω—É.

## üß™ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ CI/CD (Continuous Integration)

–ú—ã –ø–∏—à–µ–º –º–∞—Ç–∞–Ω, –ø–æ—ç—Ç–æ–º—É –∫–æ–¥ –æ–±—è–∑–∞–Ω –¥–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ—é –ø—Ä–æ—Ñ–ø—Ä–∏–≥–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ CI –ø–∞–π–ø–ª–∞–π–Ω–∞—Ö (–Ω–∞ —Å–ª–æ–≤–æ –Ω–µ –≤–µ—Ä–∏–º, –≤–µ—Ä–∏–º –ª–æ–≥–∞–º):
1. **Method of Manufactured Solutions (MMS)**: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏ (Homogeneous, Non-Trivial, Variable Kappa). 
2. **`SpatialConvergenceTest`** –∏ **`TemporalConvergenceTest`**: –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∞–ª—å–Ω–æ –≤—ã–¥–∞–µ—Ç $O(h^2)$ –∏ $O(\Delta t^2)$. –£–ø–∞–ª–∞ —Ç–æ—á–Ω–æ—Å—Ç—å ‚Äî –¥—Ä–æ–ø–∞–µ–º –ø–∞–π–ø–ª–∞–π–Ω –∫ —á–µ—Ä—Ç—è–º, –º–∞—Ç–∞–Ω –Ω–µ –≤—Ä–µ—Ç.
3. **–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Å—Ç–µ–π—Ç-—Ç–µ—Å—Ç—ã (`RegressionTest`)**: –ì–∞—Ä–∞–Ω—Ç–∏—è —Ç–æ–≥–æ, —á—Ç–æ –≤–∞—à "–º–∞–ª–µ–Ω—å–∫–∏–π –±–µ–∑–æ–±–∏–¥–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥" –Ω–µ —Å–ª–æ–º–∞–ª —Ñ–ª–æ—É JSON –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤. –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–ø—É—Ç -> –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–∫–∞–∑—É–µ–º—ã–π –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∞—É—Ç–ø—É—Ç.

## üìä –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (–û–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∞–º–∏)
–ö–∞–∂–¥—ã–π –ø—Ä–æ–≥–æ–Ω —á–µ—Ä–µ–∑ `RunCommand` –ø–ª—é–µ—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `artifacts/` –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π —Å–ª–µ–ø–æ–∫ –∑–∞–ø—É—Å–∫–∞, —á—Ç–æ–±—ã –Ω–∞—É–∫–∞ –±—ã–ª–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–π (–∏ —á—Ç–æ–±—ã –±—ã–ª–æ —á–µ–º —Ç–∫–Ω—É—Ç—å –¥–µ–≤–æ–ø—Å–æ–≤):
- `metrics.json`: –í—Ä–µ–º—è, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –æ—à–∏–±–∫–∏ L2/Linf, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π —Å—ã—Ä–æ–≥–æ PCG.
- `effective_config.json`: –ö–∞–∫–∏–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–µ—Ñ–æ–ª—Ç—ã –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `threadsEffective`). –ß—Ç–æ–± –±–µ–∑ –º–∞–≥–∏–∏.
- `build_info.json`: –ü–æ–ª–Ω—ã–π –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Å–ª–µ–ø–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞ (Architecture, JVM version, OS, –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `System.getenv()`).
- `config.json`: –û—Ä–∏–≥–∏–Ω–∞–ª –∫–æ–Ω—Ñ–∏–≥–∞ —é–∑–µ—Ä–∞, —á—Ç–æ–± –ø–æ—Ç–æ–º –Ω–µ –æ—Ç–º–∞–∑—ã–≤–∞–ª–∏—Å—å, —á—Ç–æ "–æ–Ω–æ —Å–∞–º–æ".

–í—Å—ë –∑–∞—Ç–æ—á–µ–Ω–æ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π bandwidth –ø–∞–º—è—Ç–∏ –ø–æ Roofline –º–æ–¥–µ–ª–∏. –ì–æ–Ω—è–π—Ç–µ —Ç–µ—Å—Ç—ã, –¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä, –∏ –ø—É—Å—Ç—å GC –ø–ª–∞—á–µ—Ç –æ—Ç –±–µ–∑–¥–µ–ª—å—è!
